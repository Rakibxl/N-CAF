<div class="chat-box-outer">
    <button class="chat-box-button" (click)="toggleClick()" [style.opacity]="animationOpen == 'out' ? 1: 0" >
        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chat-dots" fill="currentColor"
            xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd"
                d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z" />
            <path
                d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
        </svg>
    </button>
    <div class="chat-box-content" [@scaleAnimation]="animationOpen">
        <div class="card-hover-shadow-2x card">
            <div class="card-header-tab card-header">
                <div class="card-header-title font-size-lg text-capitalize font-weight-normal">
                    <i class="header-icon lnr-printer icon-gradient bg-ripe-malin"></i> 
                    <h4>Chat Box</h4>
                </div>
                <div class="row col-12">
                    <div class="col-xl-6 col-md-6">
                        <div class="caf-input-group d-flex align-items-center">
                            <label>Select Person</label>
                            <div class="pl-2" [ngStyle]="{'width':100+'1%'}">
                                <ng-select name="chattingUserId"
                                           [items]="applicationUserData"
                                           bindLabel="email"
                                           bindValue="id"
                                           [multiple]="false"
                                           [dropdownPosition]="'top'"
                                           [readonly]="(chattingOfferInfoId||null)!=null"
                                           (change)="fnChangeApplicationUser()"
                                           [(ngModel)]="chattingUserId">
                                </ng-select>
                            </div>
                            <p class="text-info d-none">Info message</p>
                            <p class="text-danger d-none">Danger message</p>
                        </div>
                    </div>
                    <div class="col-xl-6 col-md-6">
                        <div class="caf-input-group d-flex align-items-center">
                            <label>Select Job</label>
                            <div class="pl-2" [ngStyle]="{'width':100+'1%'}">
                                <ng-select name="chattingOfferInfoId"
                                           [items]="applicationOfferData"
                                           bindLabel="code"
                                           bindValue="offerInfoId"
                                           [multiple]="false"
                                           [dropdownPosition]="'top'"
                                           [readonly]="(chattingUserId||null)!=null"
                                           (change)="fnChangeOfferId()"
                                           [(ngModel)]="chattingOfferInfoId">
                                </ng-select>
                            </div>
                            <p class="text-info d-none">Info message</p>
                            <p class="text-danger d-none">Danger message</p>
                        </div>
                    </div>
                </div>

                <span class="chatbox-close" (click)="closeChatbox()">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-dash-circle" fill="currentColor"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                        <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z" />
                    </svg>
                </span>
            </div>

            <div class="scroll-area-lg">
                <perfect-scrollbar style="max-height: 80vh;" [autoPropagation]="true">
                    <div class="ps-content">
                        <div class="chat-wrapper p-1">
                            <div *ngFor="let notification of this.notificationCollection" [ngClass]="notification.createdBy ==this.chattingUserId ? 'float-right' : 'chat-box-wrapper'">
                                <div >
                                    <div class="avatar-icon-wrapper mr-1">
                                        <div class="badge badge-bottom btn-shine badge-success badge-dot badge-dot-lg">
                                        </div>
                                        <div class="avatar-icon avatar-icon-lg rounded">
                                            <img alt="" src="./assets/images/avatars/2.jpg">
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <div class="chat-box">{{notification.messageContent}} </div><small class="opacity-6">
                                        <fa class="mr-1" name="calendar-alt" _nghost-twc-c2=""
                                            ng-reflect-name="calendar-alt"><i _ngcontent-twc-c2="" aria-hidden="true"
                                                class="fa fa-calendar-alt" ng-reflect-klass="fa fa-calendar-alt"
                                                ng-reflect-ng-class=""
                                                style="font-family: FontAwesome, Bangla1000, sans-serif;"></i></fa>
                                        11:01 AM
                                        | Yesterday
                                    </small>
                                </div>
                            </div>
                            
                            <!--<div class="float-right">
                                <div class="chat-box-wrapper chat-box-wrapper-right">
                                    <div>
                                        <div class="chat-box">Denouncing pleasure and praising pain was born and I
                                            will give
                                            you a complete account. </div><small class="opacity-6">
                                            <fa class="mr-1" name="calendar-alt" _nghost-twc-c2=""
                                                ng-reflect-name="calendar-alt"><i _ngcontent-twc-c2=""
                                                    aria-hidden="true" class="fa fa-calendar-alt"
                                                    ng-reflect-klass="fa fa-calendar-alt" ng-reflect-ng-class=""
                                                    style="font-family: FontAwesome, Bangla1000, sans-serif;"></i>
                                            </fa>
                                            11:01 AM | Yesterday
                                        </small>
                                    </div>
                                    <div>
                                        <div class="avatar-icon-wrapper ml-1">
                                            <div
                                                class="badge badge-bottom btn-shine badge-success badge-dot badge-dot-lg">
                                            </div>
                                            <div class="avatar-icon avatar-icon-lg rounded"><img alt=""
                                                    src="./assets/images/avatars/2.jpg"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>-->
                            
                        </div>
                    </div>
                    <div class="ps__rail-x" style="left: 0px; bottom: 0px;">
                        <div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div>
                    </div>
                    <div class="ps__rail-y" style="top: 0px; height: 400px; right: 0px;">
                        <div class="ps__thumb-y" tabindex="0" style="top: 0px; height: 300px;"></div>
                    </div>
                </perfect-scrollbar>
            </div>

            <div class="card-footer d-flex">
                <input class="form-control-sm form-control" name="messageInfo"  placeholder="Write here and hit enter to send..."  [(ngModel)]="messageInfo"
                    type="text" required>
                <button class="btn" (click)="fnSendMessage()" >Send</button>
            </div>

        </div>
    </div>
</div>